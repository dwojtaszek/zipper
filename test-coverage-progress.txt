# Test Coverage Progress

## Iteration 1 (2026-01-11)
**Coverage: 54%** (up from 50.8%)
- **File tested:** `ZipArchiveService.cs`
- **What was tested:** EML files with attachments AND text extraction
- **User behavior:** When generating EML files with attachments and requesting text extraction, the ZIP should contain: EML files, EML text files, attachment files, and attachment text files
- **Coverage result:** `ZipArchiveService` now at 100% (was 39.5%)
- **Learnings:** The attachment file naming uses `attachment{n}.{ext}` pattern (not `attachment.{n}.{ext}`), so the test filter needed to use `Contains("attachment")` not `Contains("attachment.")`

## Iteration 2 (2026-01-11)
**Coverage: 54.8%** (up from 54%)
- **File tested:** `ParallelFileGenerator.cs`
- **What was tested:** Target ZIP size feature (`--target-zip-size`)
- **User behavior:** When users specify a target ZIP size, files are padded with random data to reach approximately the requested size
- **Coverage result:** `ParallelFileGenerator` now at 72.2% (was 63.1%)
- **Learnings:** Compression variance makes exact targeting impossible; test uses 50% minimum threshold. Padding adds random bytes to each file.

## Iteration 3 (2026-01-11)
**Coverage: 57.1%** (up from 54.8%)
- **Files tested:** `GaussianDistribution.cs`, `ExponentialDistribution.cs`, `FileDistributionHelper.cs`
- **What happened:** Discovered existing tests were in wrong directory and not running
- **Fix applied:** Moved tests to correct directory, fixed exponential formula expected values
- **Coverage result:** All distributions now at 100%, `FileDistributionHelper` at 86.6%
- **Learnings:** Always verify tests are actually being compiled/run. Exponential CDF formula is `-ln(1-p)/Î»`

## Remaining low-coverage files (need 22.9% more to reach 80%):
- Many 0% files are internal records/types that don't need tests
- `PathValidator` (44%) - exception handling mostly defensive
- `LoadFileWriterBase` (59.3%) - helpers covered by concrete implementations
- `ProgressTracker` (67.1%) - progress reporting
- `LoadFiles.* writers (70-80%) - decent coverage already
